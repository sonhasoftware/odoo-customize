<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="declare_md_product_tree_view" model="ir.ui.view">
        <field name="name">declare.md.product.tree.view</field>
        <field name="model">declare.md.product</field>
        <field name="arch" type="xml">
            <tree string="Khai báo Data vật tư">
                <field name="product_code"/>
                <field name="product_type"/>
                <field name="product_name"/>
                <field name="product_english_name"/>
                <field name="product_long_name"/>
                <field name="status"/>
            </tree>
        </field>
    </record>

    <record id="declare_md_product_form_view" model="ir.ui.view">
            <field name="name">declare.md.product.form.view</field>
            <field name="model">declare.md.product</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <field name="status" widget="statusbar"/>
                        <button name="action_sent" string="Gửi duyệt" type="object" class="oe_highlight" invisible="status != 'draft'"/>
                        <button name="action_approve" string="Duyệt" type="object" class="oe_highlight" invisible="status != 'waiting'"/>
                        <button name="to_draft_action" string="Hoàn duyệt" type="object" class="oe_highlight" invisible="status == 'draft'"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="is_z100" readonly="status != 'draft'"/>
                                <field name="is_z101" readonly="status != 'draft'"/>
                            </group>
                            <group>
                                <field name="is_z102" readonly="status != 'draft'"/>
                                <field name="have_alt_uom" readonly="status != 'draft'"/>
                                <field name="compute_alt_uom" invisible="1"/>
                            </group>
                        </group>
                        <group>
                            <field name="company_id" readonly="status != 'draft'"/>
                            <field name="product_type" readonly="status != 'draft'"/>
                            <field name="product_name" readonly="status != 'draft'"/>
                            <field name="product_english_name" readonly="status != 'draft'"/>
                            <field name="product_long_name" readonly="status != 'draft'"/>
                        </group>
                        <group>
                            <field name="line" invisible="1"/>
                            <field name="stage" invisible="1"/>
                            <field name="brand" invisible="1"/>
                            <field name="model" invisible="1"/>
                            <field name="style" invisible="1"/>
                            <field name="capacity" invisible="1"/>
                            <field name="power" invisible="1"/>
                            <field name="substance" invisible="1"/>
                            <field name="surface" invisible="1"/>
                            <field name="diameter" invisible="1"/>
                            <field name="thickness" invisible="1"/>
                            <field name="size" invisible="1"/>
                            <field name="chemical" invisible="1"/>
                            <field name="color" invisible="1"/>
                            <field name="other" invisible="1"/>
                            <field name="tech_spec" invisible="1"/>
                            <field name="specific" invisible="1"/>
                            <field name="country" invisible="1"/>
                        </group>
                        <div class="o_row">
                            <div class="o_col_1" invisible="line != True">
                                 <label for="product_line"/>
                                <field name="product_line" readonly="status != 'draft'" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="stage != True">
                                <label for="product_stage"/>
                                <field name="product_stage" readonly="status != 'draft'" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="brand != True">
                                <label for="product_brand"/>
                                <field name="product_brand" readonly="status != 'draft'" invisible="brand != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="model != True">
                                <label for="product_model"/>
                                <field name="product_model" readonly="status != 'draft'" invisible="model != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="style != True">
                                <label for="product_style"/>
                                <field name="product_style" readonly="status != 'draft'" invisible="style != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="capacity != True">
                                <label for="product_capacity"/>
                                <field name="product_capacity" readonly="status != 'draft'" invisible="capacity != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="power != True">
                                <label for="product_power"/>
                                <field name="product_power" readonly="status != 'draft'" invisible="power != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="substance != True">
                                <label for="product_substance"/>
                                <field name="product_substance" readonly="status != 'draft'" invisible="substance != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="surface != True">
                                <label for="product_surface"/>
                                <field name="product_surface" readonly="status != 'draft'" invisible="surface != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="diameter != True">
                                <label for="product_diameter"/>
                                <field name="product_diameter" readonly="status != 'draft'" invisible="diameter != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="thickness != True">
                                <label for="product_thickness"/>
                                <field name="product_thickness" readonly="status != 'draft'" invisible="thickness != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="size != True">
                                <label for="product_size"/>
                                <field name="product_size" readonly="status != 'draft'" invisible="size != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="chemical != True">
                                <label for="product_chemical"/>
                                <field name="product_chemical" readonly="status != 'draft'" invisible="chemical != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="tech_spec != True">
                                <label for="product_tech_spec"/>
                                <field name="product_tech_spec" readonly="status != 'draft'" invisible="tech_spec != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="color != True">
                                <label for="product_color"/>
                                <field name="product_color" readonly="status != 'draft'" invisible="color != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="other != True">
                                <label for="product_other_char"/>
                                <field name="product_other_char" readonly="status != 'draft'" invisible="other != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="country != True">
                                <label for="product_country"/>
                                <field name="product_country" readonly="status != 'draft'" invisible="country != True" style="width: 100%"/>
                            </div>
                            <div class="o_col_1" invisible="specific != True">
                                <label for="product_specific"/>
                                <field name="product_specific" readonly="status != 'draft'" invisible="specific != True" style="width: 100%"/>
                            </div>
                        </div>
                        <notebook>
                            <page string="Thông tin cơ bản">
                                <group>
                                    <field name="basic_data" string="" readonly="status != 'draft'">
                                        <tree editable="bottom" class="md-product">
                                            <field name="old_product_code"/>
                                            <field name="main_unit"/>
                                            <field name="product_group"/>
<!--                                            <field name="x_mch_level_1"/>-->
<!--                                            <field name="x_mch_level_2"/>-->
<!--                                            <field name="x_mch_level_3"/>-->
<!--                                            <field name="x_mch_level_4"/>-->
                                            <field name="material"/>
                                            <field name="surface"/>
                                            <field name="batch_management"/>
                                            <field name="sale_division"/>
                                            <field name="malt_prdhier"/>
                                            <field name="gross_weight"/>
                                            <field name="net_weight"/>
                                            <field name="weight_unit" required="required_weight_unit != False"/>
                                            <field name="volume"/>
                                            <field name="volume_unit" required="required_volume_unit != False"/>
                                            <field name="size"/>
                                            <field name="required_weight_unit" column_invisible="1"/>
                                            <field name="required_volume_unit" column_invisible="1"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Đơn vị thay thế">
                                <group>
                                    <field name="alternative_uom" string="" readonly="status != 'draft'">
                                        <tree editable="bottom" class="md-product">
                                            <field name="alternative_unit"/>
                                            <field name="unit_measure"/>
                                            <field name="denominator"/>
                                            <field name="numerator"/>
                                            <field name="char_name"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Thông tin plant">
                                <group>
                                    <field name="plant_data" string="" readonly="status != 'draft'">
                                        <tree editable="bottom" class="md-product">
                                            <field name="check_stock" column_invisible="1"/>
                                            <field name="check_shi" column_invisible="1"/>
                                            <field name="material_type" column_invisible="1"/>
                                            <field name="sonha_plant"/>
                                            <field name="purchasing_group"/>
                                            <field name="availability_check"/>
                                            <field name="profit_center"/>
                                            <field name="special_procurement_type" readonly="check_stock != False or check_shi != False"/>
                                            <field name="plan_deliver_time" readonly="check_stock != False"/>
                                            <field name="safety_time" readonly="check_stock != False or check_shi != False"/>
                                            <field name="safety_stock" readonly="check_stock != False"/>
                                            <field name="mrp_controller" readonly="check_stock != False or check_shi != False"/>
                                            <field name="co_product" readonly="check_stock != False"/>
                                            <field name="procurement_type" readonly="check_stock != False or check_shi != False"/>
                                            <field name="valuation_class" readonly="check_stock != False"/>
                                            <field name="overhead_group" readonly="check_stock != False or check_shi != False"/>
                                            <field name="inspection_type_01" readonly="check_stock != False"/>
                                            <field name="inspection_type_z01" readonly="check_stock != False"/>
                                            <field name="inspection_type_04" readonly="check_stock != False"/>
                                            <field name="inspection_type_z04" readonly="check_stock != False"/>
                                            <field name="inspection_type_05" readonly="check_stock != False"/>
                                            <field name="inspection_type_z05" readonly="check_stock != False"/>
                                            <field name="inspection_type_08" readonly="check_stock != False"/>
                                            <field name="inspection_type_z08" readonly="check_stock != False"/>
                                            <field name="inspection_type_10" readonly="check_stock != False"/>
                                            <field name="inspection_type_z10" readonly="check_stock != False"/>
                                            <field name="inspection_type_89" readonly="check_stock != False"/>
                                            <field name="inspection_type_z89" readonly="check_stock != False"/>
                                            <field name="domain_valuation_class" string="Miền"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Thông tin bán hàng">
                                <group>
                                    <field name="sale_data" string="" readonly="status != 'draft'">
                                        <tree editable="bottom" class="md-product">
                                            <field name="mat_type" column_invisible="1"/>
                                            <field name="company_id" column_invisible="1"/>
                                            <field name="sale_organization"/>
                                            <field name="distribution_chanel"/>
                                            <field name="sale_unit"/>
                                            <field name="deliver_plant"/>
                                            <field name="tax"/>
                                            <field name="item_category_group"/>
                                            <field name="aag_malt"/>
                                            <field name="mat_group_1"/>
                                            <field name="mat_group_2"/>
                                            <field name="mat_group_price"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Quy trình duyệt">
                                <group>
                                    <field name="md_approve_display" string="" readonly="1">
                                        <tree editable="bottom">
                                            <field name="sequence_step"/>
                                            <field name="status"/>
                                            <field name="employee_id"/>
                                            <field name="level"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

    <record id="view_declare_md_product_search" model="ir.ui.view">
        <field name="name">form.declare.md.product.search</field>
        <field name="model">declare.md.product</field>
        <field name="arch" type="xml">
            <search string="Search Vật tư">
                <field name="product_name" string="Tên vật tư"/>
                <filter string="Trạng thái: Chờ duyệt" name="state_waiting_md_product" domain="[
                ('status', '=', 'waiting'), ('next_approve_employee.user_id', '=', uid)]"/>
            </search>
        </field>
    </record>

    <record id="action_custom_multi_approval_product" model="ir.actions.server">
            <field name="name">Duyệt nhiều</field>
            <field name="model_id" ref="model_declare_md_product"/>
            <field name="binding_model_id" ref="model_declare_md_product"/>
            <field name="binding_view_types">list</field>
            <field name="state">code</field>
            <field name="code">
                action = records.multi_approval()
            </field>
        </record>

    <record id="declare_md_product_action" model="ir.actions.act_window">
        <field name="name">Khai báo Data vật tư</field>
        <field name="res_model">declare.md.product</field>
        <field name="search_view_id" ref="view_declare_md_product_search"/>
        <field name="view_mode">tree,form</field>
    </record>
</odoo>